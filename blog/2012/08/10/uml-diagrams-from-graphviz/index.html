
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>UML Diagrams From Graphviz - Comanche Hill</title>
  <meta name="author" content="Mark Morga">

  
  <meta name="description" content="I&rsquo;m not a huge fan of UML. I find that it took a simple idea (standard conceptual drawings) and made it much more complex than necessary with &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mmorga.github.io/blog/2012/08/10/uml-diagrams-from-graphviz">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Comanche Hill" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
    <link href='https://fonts.googleapis.com/css?family=Lato|Montserrat:700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12992468-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Comanche Hill</a></h1>
  
    <h2>Mark Morga&#8217;s Blog.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mmorga.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">UML Diagrams From Graphviz</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-08-10T11:35:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>11:35 am</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://mmorga.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&rsquo;m not a huge fan of UML. I find that it took a simple idea (standard conceptual drawings) and made it much more complex than necessary with the unwise goal of allowing commercial UML tools to flourish and make code-to-diagram round trip conversion something people might want to do. Something like MagicDraw I find horrible from a performance and usability perspective.</p>

<p>I&rsquo;m also not a big fan of a lot of drawing software. Visio is great unless you don&rsquo;t run on Windows, don&rsquo;t own a copy, or care about usability. Omnigraffle on the Mac is arguably better on the usability front, but you still end up tweaking the drawing a lot more than just entering your relationships and drawing connections. With any drawing software, the saved file is not human readable - and looking at diffs in a source control system tells you nothing</p>

<p>I like Graphviz for making quick drawings that are minimalistic and take away the tweaking factor of a lot of apps. You describe the nodes and edges and Graphviz figures out how to handle the layout of the drawing. Need to add something later? No problem, just put it in the dot file and regenerate your results.</p>

<p>Graphviz has the advantages of:</p>

<ol>
<li>Runs everywhere</li>
<li>Free</li>
<li>Text based - diff friendly changes</li>
<li>Supports a wide variety of output formats: bmp, eps, fig, gd, gd2, gif, gtk, ico, imap, cmapx, jpg, pdf, plain, png, ps, svg, tiff, vml, vrml, wbmp, webp, xlib</li>
</ol>


<p>Graphviz&rsquo;s disadvantages:</p>

<ol>
<li>Sometimes the layout is less than perfect</li>
<li>The output is pretty plain unless you spend a lot of adding style in the dot (which hurts the simplicity of the input format). Or spend time tweaking the output format (which gets you back into the image software trap)</li>
<li>Doesn&rsquo;t support UML style graphics</li>
</ol>


<p>For a long time graphviz supported the inclusion of PostScript files to define shapes, but this was only useful if you were outputting PostScript as a final result. I like using SVG as my format of choice since it can be freely scaled and works in most web browsers these days. Looking around the other day, I found a reference to the fact that Graphviz also supports the inclusion of SVG files as an image format.  With a little experimentation, I found that it works pretty well.</p>

<p>First, I created a series of UML images in SVG format for inclusion. The full set is in the GitHub project referenced below, but an example for a Component icon looks like this:</p>

<figure class='code'><figcaption><span>component.svg</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;svg</span>
</span><span class='line'>   <span class="na">xmlns:svg=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span>
</span><span class='line'>   <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span>
</span><span class='line'>   <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span>
</span><span class='line'>   <span class="na">version=</span><span class="s">&quot;1.1&quot;</span>
</span><span class='line'>   <span class="na">width=</span><span class="s">&quot;91&quot;</span>
</span><span class='line'>   <span class="na">height=</span><span class="s">&quot;36&quot;</span>
</span><span class='line'>   <span class="na">id=</span><span class="s">&quot;component-svg&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>   <span class="nt">&lt;defs&gt;</span>
</span><span class='line'>     <span class="nt">&lt;symbol</span> <span class="na">id=</span><span class="s">&quot;component-badge&quot;</span> <span class="na">class=</span><span class="s">&quot;badge&quot;</span> <span class="na">preserveAspectRatio=</span><span class="s">&quot;xMaxYMin&quot;</span> <span class="na">viewBox=</span><span class="s">&quot;-1 -1 14 12&quot;</span> <span class="na">style=</span><span class="s">&quot;fill:#ffffff;stroke:#000000;stroke-width:0.75&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;rect</span> <span class="na">height=</span><span class="s">&quot;10&quot;</span> <span class="na">width=</span><span class="s">&quot;10&quot;</span> <span class="na">x=</span><span class="s">&quot;3&quot;</span> <span class="na">y=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;rect</span> <span class="na">height=</span><span class="s">&quot;2&quot;</span> <span class="na">width=</span><span class="s">&quot;6&quot;</span> <span class="na">x=</span><span class="s">&quot;0&quot;</span> <span class="na">y=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;rect</span> <span class="na">height=</span><span class="s">&quot;2&quot;</span> <span class="na">width=</span><span class="s">&quot;6&quot;</span> <span class="na">x=</span><span class="s">&quot;0&quot;</span> <span class="na">y=</span><span class="s">&quot;6&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/symbol&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/defs&gt;</span>
</span><span class='line'>    <span class="nt">&lt;g&gt;</span>
</span><span class='line'>      <span class="nt">&lt;rect</span>
</span><span class='line'>           <span class="na">height=</span><span class="s">&quot;35&quot;</span>
</span><span class='line'>           <span class="na">width=</span><span class="s">&quot;90&quot;</span>
</span><span class='line'>           <span class="na">y=</span><span class="s">&quot;0&quot;</span>
</span><span class='line'>           <span class="na">x=</span><span class="s">&quot;0&quot;</span>
</span><span class='line'>           <span class="na">class=</span><span class="s">&quot;umlbox&quot;</span>
</span><span class='line'>           <span class="na">style=</span><span class="s">&quot;fill:#ffffff;stroke:#000000;stroke-width:1;&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;use</span> <span class="na">x=</span><span class="s">&quot;72&quot;</span> <span class="na">y=</span><span class="s">&quot;4&quot;</span> <span class="na">xlink:href=</span><span class="s">&quot;#component-badge&quot;</span> <span class="na">width=</span><span class="s">&quot;15&quot;</span> <span class="na">height=</span><span class="s">&quot;11&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/g&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you can create a file describing your Component Diagram which looks like this:</p>

<figure class='code'><figcaption><span>sample.dot</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">digraph</span> <span class="no">SampleComponentDiagram</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sample Component Diagram&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="n">fontname</span><span class="o">=</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="n">node</span> <span class="o">[</span><span class="n">fontname</span><span class="o">=</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span><span class="n">shape</span><span class="o">=</span><span class="n">none</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="n">edge</span> <span class="o">[</span><span class="n">arrowhead</span><span class="o">=</span><span class="s2">&quot;vee&quot;</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;#003388&quot;</span><span class="p">,</span><span class="n">fontname</span><span class="o">=</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;8&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">rankdir</span><span class="o">=</span><span class="no">LR</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">subgraph</span> <span class="n">cluster0</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">style</span><span class="o">=</span><span class="n">filled</span><span class="p">;</span>
</span><span class='line'>    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#2b6f6f&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;#fc93cb&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Web Application&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">portal</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Customer</span><span class="se">\n</span><span class="s2">Portal&quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s2">&quot;portal.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sr">//</span> <span class="no">Services</span>
</span><span class='line'>    <span class="n">payment</span> <span class="o">[</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;payment&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Payment&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;service.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">user</span> <span class="o">[</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;User&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;service.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">product</span> <span class="o">[</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;product&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Product&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;service.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">subgraph</span> <span class="n">cluster1</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">style</span><span class="o">=</span><span class="n">filled</span><span class="p">;</span>
</span><span class='line'>    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#2b6f6f&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">fillcolor</span><span class="o">=</span><span class="s2">&quot;#96f4eb&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Backend&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">billing</span> <span class="o">[</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;billing&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Billing API&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;service.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sr">//</span> <span class="no">Databases</span>
</span><span class='line'>    <span class="n">sqlServer</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;SQL</span><span class="se">\n</span><span class="s2">Server&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;database.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">riak</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Riak&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;cloud.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sr">//</span> <span class="no">Components</span>
</span><span class='line'>    <span class="n">loggingJournal</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Logging</span><span class="se">\n</span><span class="s2">Journal&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;component.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">watchdog</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Watchdog&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;component.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">eventQueue</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Event ActiveMQ&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;queue.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sr">//</span> <span class="no">Portals</span>
</span><span class='line'>    <span class="n">supportPortal</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Support</span><span class="se">\n</span><span class="s2">Portal&quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s2">&quot;portal.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">riakAdmin</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Riak</span><span class="se">\n</span><span class="s2">Admin</span><span class="se">\n</span><span class="s2">Web</span><span class="se">\n</span><span class="s2">Portal&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;portal.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">subgraph</span> <span class="n">cluster3</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="n">customer</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Customer&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;user.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>    <span class="n">apiClient</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;API Client&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;user.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">devOps</span> <span class="o">[</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;DevOps&quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s2">&quot;user.svg&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="sr">//</span> <span class="no">Connections</span>
</span><span class='line'>  <span class="n">customer</span><span class="o">-&gt;</span><span class="n">portal</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">apiClient</span><span class="o">-&gt;</span><span class="n">payment</span><span class="p">;</span>
</span><span class='line'>  <span class="n">apiClient</span><span class="o">-&gt;</span><span class="n">user</span><span class="p">;</span>
</span><span class='line'>  <span class="n">apiClient</span><span class="o">-&gt;</span><span class="n">product</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">riak</span><span class="p">;</span>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">billing</span><span class="p">;</span>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">supportPortal</span><span class="p">;</span>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">payment</span><span class="p">;</span>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">user</span><span class="p">;</span>
</span><span class='line'>  <span class="n">watchdog</span><span class="o">-&gt;</span><span class="n">product</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">devOps</span><span class="o">-&gt;</span><span class="n">riakAdmin</span><span class="p">;</span>
</span><span class='line'>  <span class="n">devOps</span><span class="o">-&gt;</span><span class="n">supportPortal</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">riakAdmin</span><span class="o">-&gt;</span><span class="n">riak</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">payment</span><span class="o">-&gt;</span><span class="n">eventQueue</span><span class="p">;</span>
</span><span class='line'>  <span class="n">product</span><span class="o">-&gt;</span><span class="n">eventQueue</span><span class="p">;</span>
</span><span class='line'>  <span class="n">user</span><span class="o">-&gt;</span><span class="n">eventQueue</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">eventQueue</span><span class="o">-&gt;</span><span class="n">billing</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">billing</span><span class="o">-&gt;</span><span class="n">sqlServer</span><span class="p">;</span>
</span><span class='line'>  <span class="n">billing</span><span class="o">-&gt;</span><span class="n">loggingJournal</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">loggingJournal</span><span class="o">-&gt;</span><span class="n">riak</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running the file through graphviz like this:</p>

<figure class='code'><figcaption><span>Process the dot file</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>dot -Tsvg -O sample.dot
</span></code></pre></td></tr></table></div></figure>


<p>Results in an image that looks like this:</p>

<p><img src="/images/2012-08-10/sample.dot.png" alt="Sample Component Diagram" /></p>

<p>Which is not too bad of a start. From here, there&rsquo;s a few things I think I could do to make it even better.</p>

<ol>
<li>Pre-process the dot file. Come up with an annotation to denote the type of image to include for a node without having to reference the image file.</li>
<li>Assign ids and classes as appropriate in the output which is handy for animating the resulting SVG or otherwise working with the SVG DOM later.</li>
<li>Post-process the SVG output to look nicer. Apply a better look to the sub-graphs, round the corners, add add gradients, etc. This sort of thing has been done before with XSLT.</li>
</ol>


<p>I think this approach is reasonable for some UML types: component, use case, collaboration, activity, and maybe deployment. Sequence diagrams are different in layout and probably aren&rsquo;t worth the effort to attempt.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mark Morga</span></span>

      




<time class='entry-date' datetime='2012-08-10T11:35:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>11:35 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/dot-graphviz-uml-architecture/'>dot graphviz uml architecture</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://mmorga.github.io/blog/2012/08/10/uml-diagrams-from-graphviz/" data-via="mmorga" data-counturl="http://mmorga.github.io/blog/2012/08/10/uml-diagrams-from-graphviz/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/07/31/making-the-windows-shell-livable/" title="Previous Post: Making the Windows Shell Livable">&laquo; Making the Windows Shell Livable</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
  <img src="http://gravatar.com/avatar/4f530b9a625250c69465ac9c3bb028f4" alt="Gravatar image" title="Gravatar Image" />
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/10/uml-diagrams-from-graphviz/">UML Diagrams From Graphviz</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/31/making-the-windows-shell-livable/">Making the Windows Shell Livable</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/01/hmm-been-a-couple-of-years/">Hmm - Been a Couple of Years&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/12/18/spoiler-free-avatar-review/">Spoiler Free Avatar Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/08/01/moved-to-slicehost/">Moved to SliceHost</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mmorga">@mmorga</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mmorga',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/markmorga?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Mark Morga -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'markmorga';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mmorga.github.io/blog/2012/08/10/uml-diagrams-from-graphviz/';
        var disqus_url = 'http://mmorga.github.io/blog/2012/08/10/uml-diagrams-from-graphviz/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
