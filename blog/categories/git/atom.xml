<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Git | Comanche Hill]]></title>
  <link href="http://mmorga.github.io/blog/categories/git/atom.xml" rel="self"/>
  <link href="http://mmorga.github.io/"/>
  <updated>2015-01-08T21:06:39-06:00</updated>
  <id>http://mmorga.github.io/</id>
  <author>
    <name><![CDATA[Mark Morga]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Making the Windows Shell Livable]]></title>
    <link href="http://mmorga.github.io/blog/2012/07/31/making-the-windows-shell-livable/"/>
    <updated>2012-07-31T16:44:00-05:00</updated>
    <id>http://mmorga.github.io/blog/2012/07/31/making-the-windows-shell-livable</id>
    <content type="html"><![CDATA[<p>Back when I last &ldquo;did&rdquo; Windows development, .Net didn&rsquo;t exist and the Windows CMD prompt was
one of the first things I replaced (with Cygwin). Unfortunately, last time I helped someone with a Windows
machine the Cygwin install didn&rsquo;t go well - it seemed to be mired in the past, was slow, and the
git version included did not work for some reason with the repos we needed to use.</p>

<p>Fast forward to the last couple of weeks. I&rsquo;m in the process of learning C# and .Net to help build
a new framework with a team and I&rsquo;m running Windows 7 in a VM. So I&rsquo;m coming to Windows fresh after a break
of almost 8 years. The good news so far has been than C# strikes me much better than Java did (when I last
used it) and that the .Net environment is pretty easy to get learning.  Some DLL hell still exists (which
I ran into using the ZeroMQ NuGet libraries), but for the most part it has been fairly pleasant. Unfortunately,
the old Windows CMD prompt is unchanged from all those years ago. Despair sets in.</p>

<p>Then I learned about <a href="http://technet.microsoft.com/en-us/library/bb978526.aspx">PowerShell</a>. After giving
it a whirl and learning a thing or two, I&rsquo;ve finally got a very usable shell configuration for Windows
development that doesn&rsquo;t make me weep every time I have to use it. Here&rsquo;s how I have it configured.</p>

<p>On my VM, PowerShell comes pre-installed, you may need to download it
depending on your version of Windows.</p>

<h2>Console2</h2>

<p>First I installed <a href="http://sourceforge.net/projects/console/">Console2</a>. Console is a Windows GUI which wraps
the shell of your choice and adds: multiple tabs, text editor-like text selection, different background types, alpha and color-key transparency, configurable font, different window styles, hot-key mapping, etc.  This step isn&rsquo;t strictly necessary
but I like having a more responsive window for my shell and I use tabs often in iTerm on the mac.</p>

<p>I configure Console to use PowerShell by starting Console, selecting the Edit->Settings menu, then selecting the
PowerShell exe in the &ldquo;Shell&rdquo; chooser which on my machine is located at: &ldquo;C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe&rdquo;.</p>

<h2>Git</h2>

<p>A lot of Windows developers seem GUI bound which is an unfair self-limitation to impose. I install the git version from
the primary <a href="http://git-scm.com">Git</a> site. <a href="http://git-scm.com/download/win">Download</a></p>

<p>When installing, Git offers you the choice to install git for Git Bash only or for general use. I chose the general
purpose case.</p>

<h2>Configuring Git</h2>

<p>Note to self - you need to configure git to use .ssh keys in order for things to work correctly with remote repos. I&rsquo;ll
post something on this later.</p>

<h2>Installing Posh-Git into PowerShell</h2>

<p>Once you have git installed and configured, to get the most from Powershell, I recommend installing posh-git.</p>

<p>First set the security for your PowerShell instance. Run PowerShell as Administrator and type:</p>

<pre><code class="powershell ">Set-ExecutionPolicy RemoteSigned -Confirm
</code></pre>

<p>Make sure git can be run from your shell. If not, add it to your user&rsquo;s PATH.</p>

<p>Type the following commands to install PsGet and Posh-Git:</p>

<pre><code class="powershell">(new-object Net.WebClient).DownloadString("http://psget.net/GetPsGet.ps1") | iex
install-module posh-git
</code></pre>

<p>To make it available at all times, install it in the PowerShell profile script. On my machine, this is
located in my Documents folder: WindowsPowerShell\Microsoft.PowerShell_profile.ps1.</p>

<pre><code class="powershell Microsoft.PowerShell_profile.ps1">Push-Location (Split-Path -Path $MyInvocation.MyCommand.Definition -Parent)

# Load posh-git module from current directory
# Import-Module .\posh-git

# If module is installed in a default location ($env:PSModulePath),
# use this instead (see about_Modules for more information):
Import-Module posh-git


# Set up a simple prompt, adding the git prompt parts inside git repos
function prompt {
    $realLASTEXITCODE = $LASTEXITCODE

    # Reset color, which can be messed up by Enable-GitColors
    $Host.UI.RawUI.ForegroundColor = $GitPromptSettings.DefaultForegroundColor

    Write-Host($pwd) -nonewline

    Write-VcsStatus

    $global:LASTEXITCODE = $realLASTEXITCODE
    return "&gt; "
}

Enable-GitColors

Pop-Location
</code></pre>

<p>Exit out of Console/PowerShell and the next time you start up, you&rsquo;ll see extra functionality for Git while in directories that
are Git repositories.</p>

<p>You can now use tab completion to complete both git commands and to fill in branch or remote names in addition to file names.</p>

<p>When you type &ldquo;git status&rdquo;, you will see color highlighting of files that helps understanding what is staged versus what
isn&rsquo;t yet.</p>

<p>Have fun.  Let me know if you have any tips for PowerShell that I should pick up.</p>
]]></content>
  </entry>
  
</feed>
